<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人生修复指南 | Life Repair Protocol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #fcfaf7; color: #1c1917; scroll-behavior: smooth; }
        .serif { font-family: 'Noto Serif SC', serif; }
        .card { background: white; border: 1px solid #e7e5e4; border-radius: 1.5rem; padding: 2rem; shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        textarea { width: 100%; background: #f9f8f6; border-radius: 1rem; padding: 1.5rem; border: 1px solid #e7e5e4; min-height: 150px; outline: none; transition: all 0.2s; }
        textarea:focus { background: white; border-color: #1c1917; ring: 2px solid #1c1917; }
        .hidden-section { display: none; }
        @media print { .no-print { display: none !important; } }
    </style>
</head>
<body class="pb-32">

    <div class="max-w-2xl mx-auto px-6">
        <section id="intro" class="min-h-screen flex flex-col justify-center items-center text-center space-y-8">
            <h1 class="text-5xl md:text-6xl font-bold serif tracking-tight">人生修复指南</h1>
            <p class="text-stone-400 uppercase tracking-[0.2em] text-xs">Life Repair Protocol v1.0</p>
            
            <div class="card italic serif text-stone-600 leading-relaxed text-lg max-w-lg">
                “你想拥有的生活，建立在你不敢放手的废墟之上。”
            </div>

            <div class="space-y-6 w-full max-w-sm">
                <button onclick="startProtocol()" class="w-full py-4 bg-stone-900 text-white rounded-full font-bold shadow-2xl hover:scale-105 transition-transform">
                    签写协议并开始
                </button>
                <p class="text-[10px] text-stone-400">数据将加密存储在您的本地浏览器中</p>
            </div>
        </section>

        <main id="main-content" class="hidden-section space-y-24 pt-20">
            
            <section id="phase-1" class="space-y-10">
                <div class="border-b border-stone-200 pb-6">
                    <h2 class="text-3xl font-bold serif">01. 反向愿景</h2>
                    <p class="text-stone-500 mt-2">定义你想要逃离的痛苦现状。</p>
                </div>

                <div class="card space-y-4">
                    <h3 class="font-bold text-sm tracking-widest uppercase">健康与能量</h3>
                    <p class="text-xs text-stone-400">描述 5 年后你不改变习惯导致的虚弱和疾病。</p>
                    <textarea id="health" oninput="saveData()" placeholder="开始书写你的恐惧..."></textarea>
                </div>

                <div class="card space-y-4">
                    <h3 class="font-bold text-sm tracking-widest uppercase">财务与尊严</h3>
                    <p class="text-xs text-stone-400">描述由于平庸导致的匮乏，以及不得不低头的时刻。</p>
                    <textarea id="finance" oninput="saveData()" placeholder="那些让你感到羞愧的瞬间..."></textarea>
                </div>

                <button onclick="document.getElementById('phase-2').scrollIntoView()" class="w-full py-4 border-2 border-stone-900 rounded-full font-bold">
                    下一步：身份重构 →
                </button>
            </section>

            <section id="phase-2" class="space-y-10">
                <div class="border-b border-stone-200 pb-6">
                    <h2 class="text-3xl font-bold serif">02. 身份协议</h2>
                    <p class="text-stone-500 mt-2">你不再是过去的你。定义你的新身份。</p>
                </div>

                <div class="card bg-stone-900 text-white space-y-4">
                    <h3 class="font-bold text-sm tracking-widest uppercase text-stone-400">我是谁 (I AM)</h3>
                    <textarea id="identity" oninput="saveData()" class="bg-stone-800 border-stone-700 text-white" placeholder="例如：我是一个通过深度工作创造价值的自由人。"></textarea>
                </div>

                <div class="flex gap-4 no-print">
                    <button onclick="window.print()" class="flex-1 py-4 bg-stone-900 text-white rounded-full font-bold">导出协议 (PDF)</button>
                    <button onclick="resetAll()" class="px-6 py-4 text-stone-400 text-sm">重置系统</button>
                </div>
            </section>
        </main>
    </div>

    <nav id="navbar" class="hidden-section fixed bottom-8 left-1/2 -translate-x-1/2 no-print">
        <div class="bg-white/80 backdrop-blur-md border border-stone-200 px-8 py-3 rounded-full flex gap-8 shadow-2xl items-center text-[10px] font-bold text-stone-400 tracking-[0.2em]">
            <button onclick="window.scrollTo(0,0)">INTRO</button>
            <button onclick="document.getElementById('phase-1').scrollIntoView()">VISION</button>
            <button onclick="document.getElementById('phase-2').scrollIntoView()">IDENTITY</button>
        </div>
    </nav>

    <script>
        // 核心逻辑：无需 React，直接用原生 JS
        const ids = ['health', 'finance', 'identity'];
        
        // 1. 启动协议
        function startProtocol() {
            document.getElementById('main-content').classList.remove('hidden-section');
            document.getElementById('navbar').classList.remove('hidden-section');
            document.getElementById('phase-1').scrollIntoView({ behavior: 'smooth' });
            localStorage.setItem('protocol-started', 'true');
        }

        // 2. 保存数据
        function saveData() {
            const data = {};
            ids.forEach(id => {
                data[id] = document.getElementById(id).value;
            });
            localStorage.setItem('life-reset-v4', JSON.stringify(data));
        }

        // 3. 加载数据
        window.onload = function() {
            const savedData = localStorage.getItem('life-reset-v4');
            const started = localStorage.getItem('protocol-started');
            
            if (savedData) {
                const data = JSON.parse(savedData);
                ids.forEach(id => {
                    if (data[id]) document.getElementById(id).value = data[id];
                });
            }

            if (started === 'true') {
                document.getElementById('main-content').classList.remove('hidden-section');
                document.getElementById('navbar').classList.remove('hidden-section');
            }
        };

        // 4. 重置
        function resetAll() {
            if (confirm('确定要清除所有自省记录吗？')) {
                localStorage.clear();
                location.reload();
            }
        }
    </script>
</body>
</html>
