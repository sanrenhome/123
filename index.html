<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>人生修复指南 · 2026新生代码</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"PingFang SC",sans-serif}
body{
background:radial-gradient(circle at top,#1a002e,#000);
color:#fff;
overflow-x:hidden;
}

.container{
max-width:480px;
margin:auto;
padding:20px;
}

.page{
display:none;
animation:fade 0.6s ease;
}

.page.active{display:block}

@keyframes fade{
from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}
}

h1{
font-size:28px;
background:linear-gradient(90deg,#ff00cc,#6a00ff);
-webkit-background-clip:text;
color:transparent;
text-shadow:0 0 20px #ff00cc;
margin-bottom:10px;
}

.subtitle{
opacity:.7;
margin-bottom:20px;
}

button{
width:100%;
padding:12px;
margin-top:15px;
border:none;
border-radius:10px;
background:linear-gradient(90deg,#ff00cc,#6a00ff);
color:#fff;
font-weight:bold;
font-size:15px;
}

input,textarea,select{
width:100%;
padding:10px;
margin-top:10px;
border-radius:8px;
border:none;
background:#111;
color:#fff;
}

.option{
background:#111;
padding:10px;
border-radius:8px;
margin:8px 0;
cursor:pointer;
border:1px solid #222;
}

.option.selected{
border:1px solid #ff00cc;
box-shadow:0 0 10px #ff00cc;
}

.progress{
height:6px;
background:#222;
border-radius:5px;
margin-bottom:15px;
}

.progress-bar{
height:6px;
background:linear-gradient(90deg,#ff00cc,#6a00ff);
border-radius:5px;
width:0%;
}

#certificate{
width:100%;
padding:25px;
border-radius:20px;
background:linear-gradient(135deg,#240046,#3c096c,#5a189a);
text-align:center;
}

.badge{
margin-top:10px;
padding:5px 10px;
border-radius:20px;
display:inline-block;
font-size:12px;
}

.legendary{background:gold;color:#000}
.epic{background:#9d4edd}
.rare{background:#4361ee}
.common{background:#555}

.watermark{
margin-top:30px;
font-size:12px;
opacity:.5;
text-align:center;
}
</style>
</head>

<body>
<div class="container">

<div class="progress"><div class="progress-bar" id="progressBar"></div></div>

<!-- 1 开场 -->
<div class="page active" id="page1">
<h1>人生修复指南 · 2026新生代码</h1>
<p class="subtitle">如果你敢直视自己的失败，你就已经比90%的人强。</p>
<p style="margin:10px 0;">敢玩的人，都不简单。</p>
<input id="nickname" placeholder="输入你的昵称（选填）">
<button onclick="nextPage()">开始重启</button>
</div>

<!-- 2 反向愿景 -->
<div class="page" id="page2">
<h1>先看清你正在走向什么</h1>
<p class="subtitle">选择最扎心的</p>

<div id="painOptions"></div>

<textarea id="painSummary" maxlength="50" placeholder="一句话总结你最害怕的人生（50字内）"></textarea>

<button onclick="showAIPrompt()">AI辅助</button>
<button onclick="nextPage()">继续</button>
</div>

<!-- 3 新身份代码 -->
<div class="page" id="page3">
<h1>选择你的新身份维度</h1>
<div id="identityOptions"></div>
<button onclick="generateCode()">生成我的新生代码</button>
<div id="codeResult" style="margin-top:20px"></div>
<button onclick="nextPage()">继续</button>
</div>

<!-- 4 计划页 -->
<div class="page" id="page4">
<h1>简单行动计划</h1>
<input id="goal" placeholder="你真正想做的事">
<input id="daily" placeholder="每日最小行动仪式">
<input id="force" placeholder="强制机制（公开/金钱/打卡）">
<button onclick="nextPage()">完成计划</button>
</div>

<!-- 5 证书 -->
<div class="page" id="page5">
<div id="certificate">
<h2 id="certName"></h2>
<h1 id="certCode"></h1>
<div id="certBadge"></div>
<p id="certTags"></p>
</div>

<select id="copyText">
<option value="温柔">温柔版</option>
<option value="狠">狠人版</option>
<option value="凡尔赛">凡尔赛版</option>
</select>

<button onclick="exportImage()">导出证书</button>
<button onclick="copyShare()">复制分享文案</button>
</div>

<!-- 6 结尾 -->
<div class="page" id="page6">
<h1>2026 新生已激活</h1>
<p>分享你的新生代码，让更多人重启。</p>
<div class="watermark">
人生修复指南 · 新生代码<br>
挑战入口：你的域名.com
</div>
</div>

</div>

<script>
let currentPage=1
const totalPages=6
const progressBar=document.getElementById("progressBar")

function nextPage(){
if(currentPage<totalPages){
document.getElementById("page"+currentPage).classList.remove("active")
currentPage++
document.getElementById("page"+currentPage).classList.add("active")
progressBar.style.width=(currentPage-1)/(totalPages-1)*100+"%"
if(currentPage==5){
createCertificate()
confetti()
}
}
localStorage.setItem("lifeData",JSON.stringify(getData()))
}

function confetti(){
confetti({particleCount:200,spread:100})
}

const pains=[
"30岁还在为钱焦虑",
"刷短视频到深夜",
"对梦想越来越沉默",
"假装很忙其实没产出",
"羡慕别人却不行动",
"害怕被评价",
"拖延到自我厌恶",
"稳定但毫无激情",
"明明不差却没突破",
"日子过得越来越快"
]

const painDiv=document.getElementById("painOptions")
pains.forEach(text=>{
let div=document.createElement("div")
div.className="option"
div.innerText=text
div.onclick=()=>div.classList.toggle("selected")
painDiv.appendChild(div)
})

function showAIPrompt(){
alert("复制到AI：\n我最害怕的人生是："+document.getElementById("painSummary").value+"\n帮我分析我在逃避什么旧身份。")
}

const identities={
觉醒:["A","B","C"],
创造:["D","E","F"],
价值:["G","H","I"],
扩展:["J","K","L"]
}

const idDiv=document.getElementById("identityOptions")
Object.keys(identities).forEach(key=>{
let select=document.createElement("select")
identities[key].forEach(v=>{
let op=document.createElement("option")
op.value=v
op.innerText=key+"-"+v
select.appendChild(op)
})
idDiv.appendChild(select)
})

let generatedCode=""
let rarity=""

function generateCode(){
let selects=idDiv.querySelectorAll("select")
generatedCode=""
selects.forEach(s=>generatedCode+=s.value)
let rand=Math.random()
if(rand<0.05){rarity="传说";className="legendary"}
else if(rand<0.25){rarity="史诗";className="epic"}
else if(rand<0.6){rarity="稀有";className="rare"}
else{rarity="觉醒";className="common"}
document.getElementById("codeResult").innerHTML="代码："+generatedCode+"<br>稀有度："+rarity
}

function getData(){
return{
nickname:document.getElementById("nickname").value,
code:generatedCode,
rarity:rarity
}
}

function createCertificate(){
let data=getData()
document.getElementById("certName").innerText=(data.nickname||"匿名")+" · 新生代码"
document.getElementById("certCode").innerText=data.code
let badge=document.getElementById("certBadge")
badge.innerText=data.rarity
badge.className="badge "+(data.rarity=="传说"?"legendary":data.rarity=="史诗"?"epic":data.rarity=="稀有"?"rare":"common")
document.getElementById("certTags").innerText="2026 · 身份升级完成"
}

function exportImage(){
html2canvas(document.getElementById("certificate")).then(canvas=>{
let link=document.createElement("a")
link.download="新生代码.png"
link.href=canvas.toDataURL()
link.click()
})
}

function copyShare(){
let type=document.getElementById("copyText").value
let text=""
if(type=="温柔"){
text="我给自己做了一次人生修复，拿到了新生代码："+generatedCode+"。"
}
if(type=="狠"){
text="旧的我已清除。新身份代码："+generatedCode+"。敢挑战吗？"
}
if(type=="凡尔赛"){
text="随手测了下，居然是"+rarity+"级新生代码："+generatedCode+"。"
}
navigator.clipboard.writeText(text)
alert("已复制")
}
</script>
</body>
</html>
