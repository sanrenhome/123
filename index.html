<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ—§æˆ‘åˆ é™¤åè®® Â· 2026æ–°ç”Ÿä»£ç </title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <style>
    :root {
      --primary: #a78bfa; --dark: #7c3aed; --accent: #d8b4fe; --gold: #fbbf24; --bg: linear-gradient(135deg, #0f0f23, #1e1b4b);
      --card: rgba(30, 30, 60, 0.95); --text: #f0efff;
    }
    body { margin:0; font-family:system-ui,sans-serif; background:var(--bg); color:var(--text); min-height:100vh; display:flex; justify-content:center; align-items:flex-start; padding:16px; }
    #app { width:100%; max-width:420px; }
    .progress { height:8px; background:#2d2d4a; border-radius:4px; margin:16px 0; overflow:hidden; }
    .progress-bar { height:100%; width:0; background:linear-gradient(90deg,var(--primary),var(--accent)); transition:width 0.6s ease; }
    .card {
      background:var(--card); border-radius:28px; padding:36px 24px; margin:20px 0;
      box-shadow:0 24px 48px rgba(0,0,0,0.6); border:1px solid #3a3a7a; display:none; opacity:0; transform:translateY(30px);
      transition:all 0.6s cubic-bezier(0.34,1.56,0.64,1);
    }
    .card.active { display:block; opacity:1; transform:translateY(0); }
    h1 { font-size:2.4em; color:var(--accent); text-align:center; text-shadow:0 4px 16px rgba(167,139,250,0.5); margin-bottom:16px; }
    .intro { font-size:1.15em; line-height:1.7; color:#d1d5ff; text-align:center; margin:20px 0; }
    .option-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin:24px 0; }
    .option {
      background:#1e1e3a; border:2px solid #3a3a6e; border-radius:18px; padding:18px 14px; text-align:center; cursor:pointer;
      transition:all 0.35s; font-size:1.02em; position:relative;
    }
    .option:hover { transform:translateY(-6px); box-shadow:0 16px 32px rgba(139,92,246,0.25); border-color:var(--primary); }
    .option.selected { border-color:var(--primary); background:linear-gradient(135deg,rgba(139,92,246,0.18),rgba(216,180,254,0.1)); box-shadow:0 12px 28px rgba(139,92,246,0.3); }
    .option.selected::after { content:"âœ“"; position:absolute; top:10px; right:10px; background:var(--primary); color:white; width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; }
    textarea { width:100%; padding:14px; margin:16px 0; border-radius:12px; border:1px solid #444; background:#141426; color:white; min-height:80px; }
    button { background:linear-gradient(135deg,var(--dark),var(--primary)); color:white; border:none; padding:16px; font-size:1.15em; border-radius:999px; width:100%; margin:20px 0 12px; cursor:pointer; box-shadow:0 10px 30px rgba(124,58,237,0.45); transition:all 0.3s; }
    button:hover { transform:translateY(-3px); box-shadow:0 16px 40px rgba(124,58,237,0.55); }
    #certificate {
      background:linear-gradient(145deg,#1e1e40,#2a1a50,#3a2a70); padding:48px 28px; border-radius:32px; border:4px dashed var(--accent);
      text-align:center; position:relative; overflow:hidden; margin:28px 0; box-shadow:0 20px 60px rgba(124,58,237,0.4);
    }
    #cert-title { font-size:2.1em; color:var(--gold); text-shadow:0 4px 12px rgba(251,191,36,0.5); margin-bottom:20px; }
    .code-big { font-size:4em; font-weight:900; letter-spacing:12px; color:var(--accent); text-shadow:0 6px 24px rgba(216,180,254,0.7); margin:20px 0; }
    .rarity { font-size:1.8em; color:var(--gold); margin:16px 0; font-weight:bold; }
    .tag { display:inline-block; background:rgba(216,180,254,0.2); color:#e9d5ff; padding:10px 20px; border-radius:999px; margin:10px 8px; border:1px solid var(--accent); box-shadow:0 4px 12px rgba(216,180,254,0.25); }
    .watermark { font-size:0.9em; color:#888; margin-top:40px; opacity:0.7; }
    #shareText { width:100%; height:130px; margin:16px 0; padding:16px; background:#1a1a30; color:#e0e0ff; border:1px solid #444; border-radius:16px; font-size:1em; resize:none; }
  </style>
</head>
<body>

<div id="app">
  <div class="progress"><div class="progress-bar" id="progressBar"></div></div>

  <!-- å¼€åœº -->
  <div class="card active" id="page1">
    <h1>æ—§æˆ‘åˆ é™¤åè®®</h1>
    <p class="intro">ä½ ä¸æ˜¯æ‡’ï¼Œä½ åªæ˜¯å¤ªçˆ±é‚£ä¸ªè™½ç„¶ç—›è‹¦ä½†ç†Ÿæ‚‰çš„æ—§è‡ªå·±ã€‚</p>
    <p class="intro" style="color:#ff9999; font-weight:bold;">5åˆ†é’Ÿåï¼Œä½ ä¼šçœ‹åˆ°5å¹´åæœ€æƒ¨çš„è‡ªå·±ï¼Œç„¶åæ‹¿åˆ°ä¸“å±â€œæ–°ç”Ÿä»£ç â€ã€‚</p>
    <p class="intro">æ•¢ç©çš„äººï¼Œéƒ½ä¸ç®€å•ã€‚</p>
    <button onclick="nextPage(2)">æˆ‘æ•¢ â†’ å¼€å§‹</button>
  </div>

  <!-- åå‘æ„¿æ™¯ -->
  <div class="card" id="page2">
    <h1>ç¬¬ä¸€æ­¥ï¼šçœ‹è§æœ€æƒ¨çš„æœªæ¥</h1>
    <p class="intro">é€‰å‡ºæœ€æ‰å¿ƒçš„ç”»é¢ï¼ˆå¤šé€‰ï¼‰ï¼Œæœ€åè¡¥ä¸€å¥æœ€ç—›çš„è¯ã€‚</p>
    <div class="option-grid">
      <div class="option" data-value="æ¯å¤©åˆ·æ‰‹æœºåˆ°å‡Œæ™¨ï¼Œç¬¬äºŒå¤©ç»§ç»­éº»æœ¨">æ¯å¤©åˆ·æ‰‹æœºåˆ°å‡Œæ™¨ï¼Œç¬¬äºŒå¤©ç»§ç»­éº»æœ¨</div>
      <div class="option" data-value="å·¥èµ„åˆšå¤Ÿæˆ¿ç§Ÿï¼Œæ¢¦æƒ³æ—©è¢«ç£¨å¹³">å·¥èµ„åˆšå¤Ÿæˆ¿

ç§Ÿï¼Œæ¢¦æƒ³æ—©è¢«ç£¨å¹³</div>
      <div class="option" data-value="æœ‹å‹åœˆå…¨æ˜¯åˆ«äººç»“å©šä¹°æˆ¿ï¼Œæˆ‘åœ¨ç‚¹èµ">æœ‹å‹åœˆå…¨æ˜¯åˆ«äººç»“å©šä¹°æˆ¿ï¼Œæˆ‘åœ¨ç‚¹èµ</div>
      <div class="option" data-value="èº«ä½“å‘ç¦è„±å‘ï¼Œå´æ‡’å¾—åŠ¨">èº«ä½“å‘ç¦è„±å‘ï¼Œå´æ‡’å¾—åŠ¨</div>
      <div class="option" data-value="åå¹´åè¿˜åœ¨è¯´â€œæ˜å¹´å°±åŠªåŠ›â€">åå¹´åè¿˜åœ¨è¯´â€œæ˜å¹´å°±åŠªåŠ›â€</div>
      <div class="option" data-value="çˆ¶æ¯é—®æˆ‘è¿‡å¾—æ€ä¹ˆæ ·ï¼Œæˆ‘åªèƒ½è‹¦ç¬‘">çˆ¶æ¯é—®æˆ‘è¿‡å¾—æ€ä¹ˆæ ·ï¼Œæˆ‘åªèƒ½è‹¦ç¬‘</div>
      <div class="option" data-value="æ·±å¤œemoåˆ°å“­ï¼Œå´ä¸çŸ¥é“ä¸ºè°å“­">æ·±å¤œemoåˆ°å“­ï¼Œå´ä¸çŸ¥é“ä¸ºè°å“­</div>
      <div class="option" data-value="é•œå­é‡Œçš„äººè¶Šæ¥è¶Šåƒæˆ‘æœ€è®¨åŒçš„æ ·å­">é•œå­é‡Œçš„äººè¶Šæ¥è¶Šåƒæˆ‘æœ€è®¨åŒçš„æ ·å­</div>
    </div>
    <textarea id="anti-custom" placeholder="æœ€æ‰å¿ƒçš„ä¸€å¥è¯æ€»ç»“ï¼ˆé€‰å¡«ï¼Œ50å­—å†…ï¼‰"></textarea>
    <button onclick="nextPage(3)">å†™å®Œäº† â†’ ç”Ÿæˆæ–°ç”Ÿä»£ç </button>
  </div>

  <!-- æ–°ç”Ÿä»£ç  -->
  <div class="card" id="page3">
    <h1>ç¬¬äºŒæ­¥ï¼šé€‰æ‹©ä½ çš„æ–°ç”Ÿä»£ç </h1>
    <p class="intro">æ¯ä¸ªç»´åº¦é€‰æœ€è´´è¿‘ä½ çš„é‚£ä¸€é¡¹ï¼ˆå•é€‰ï¼‰ï¼Œç”Ÿæˆä¸“å±ä»£ç  + ç¨€æœ‰åº¦</p>

    <h3 style="color:#c4b5fd; margin:28px 0 12px;">è§‰é†’åº¦</h3>
    <div class="option-grid">
      <div class="option" data-axis="A" data-value="A">ä¸»åŠ¨è§‰é†’è€…</div>
      <div class="option" data-axis="A" data-value="a">è¢«åŠ¨æ²‰ç¡è€…</div>
    </div>

    <h3 style="color:#c4b5fd; margin:28px 0 12px;">åˆ›é€ åº¦</h3>
    <div class="option-grid">
      <div class="option" data-axis="C" data-value="C">ä»·å€¼åˆ›é€ è€…</div>
      <div class="option" data-axis="C" data-value="c">è¢«åŠ¨æ¶ˆè´¹è€…</div>
    </div>

    <h3 style="color:#c4b5fd; margin:28px 0 12px;">ä»·å€¼å‘</h3>
    <div class="option-grid">
      <div class="option" data-axis="V" data-value="V">é•¿æœŸä»·å€¼å¯¼å‘</div>
      <div class="option" data-axis="V" data-value="v">çŸ­æœŸèˆ’é€‚å¯¼å‘</div>
    </div>

    <h3 style="color:#c4b5fd; margin:28px 0 12px;">æ‰©å±•åº¦</h3>
    <div class="option-grid">
      <div class="option" data-axis="E" data-value="E">ä¸»åŠ¨æ‰©å±•è€…</div>
      <div class="option" data-axis="E" data-value="e">å®‰å…¨æ”¶ç¼©è€…</div>
    </div>

    <input type="text" id="nickname" placeholder="ä½ çš„æ–°ç”Ÿæ˜µç§°ï¼ˆé€‰å¡«ï¼‰" style="width:100%; padding:16px; margin:24px 0; border-radius:16px; border:1px solid #555; background:#1a1a2e; color:white; font-size:1.1em;"/>

    <button onclick="nextPage(4)">ç”Ÿæˆæˆ‘çš„ä»£ç  â†’</button>
  </div>

  <!-- è¯ä¹¦ -->
  <div class="card" id="page4">
    <h1>æ–°ç”Ÿå·²æ¿€æ´» âœ¨</h1>
    <div id="certificate">
      <div id="cert-title">æ—§æˆ‘åˆ é™¤åè®® Â· æ°¸ä¹…ç”Ÿæ•ˆ</div>
      <p id="cert-nick" style="font-size:1.9em; margin:20px 0;"></p>
      <div class="code-big" id="code-display"></div>
      <div class="rarity" id="rarity-text"></div>
      <div id="tags-container" style="margin:24px 0;"></div>
      <p id="cert-date" style="margin:32px 0; font-size:1.1em;"></p>
      <p class="watermark">ç”±ã€Œæ—§æˆ‘åˆ é™¤åè®®ã€ç”Ÿæˆ Â· 2026é‡å¯è§è¯ Â· åˆ†äº«ä½ çš„æ–°ç”Ÿä»£ç </p>
    </div>

    <select id="shareStyle" style="width:100%; padding:14px; margin:16px 0; border-radius:16px; background:#1a1a30; color:white; border:1px solid #555;">
      <option value="0">æ¸©æŸ”å…±é¸£ç‰ˆ</option>
      <option value="1">ç‹ æˆ³ç—›ç‚¹ç‰ˆ</option>
      <option value="2">å‡¡å°”èµ›ç‚«è€€ç‰ˆ</option>
    </select>

    <textarea id="shareText" rows="6"></textarea>

    <button onclick="saveCertificate()">ä¿å­˜è¯ä¹¦é•¿å›¾ï¼ˆé•¿æŒ‰å‘æœ‹å‹åœˆï¼‰</button>
    <button onclick="restart()" style="background:#4b5563; margin-top:12px;">é‡æ–°å¼€å§‹</button>
  </div>
</div>

<script>
  let currentPage = 1;
  const total = 4;
  const progress = document.getElementById('progressBar');

  function updateProgress() {
    progress.style.width = (currentPage / total * 100) + '%';
  }

  function nextPage(n) {
    document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
    document.getElementById(`page${n}`).classList.add('active');
    currentPage = n;
    updateProgress();
    if (n === 4) {
      generateResult();
      launchConfetti();
    }
  }

  function launchConfetti() {
    const duration = 5000;
    const end = Date.now() + duration;
    const colors = ['#a78bfa','#d8b4fe','#c4b5fd','#7c3aed','#fbbf24'];

    (function frame() {
      confetti({ particleCount: 10, angle: 60, spread: 70, origin: { x: 0 }, colors });
      confetti({ particleCount: 10, angle: 120, spread: 70, origin: { x: 1 }, colors });
      if (Date.now() < end) requestAnimationFrame(frame);
    }());
  }

  function generateResult() {
    const nick = document.getElementById('nickname').value.trim() || "æ–°ç”Ÿè§‰é†’è€…";
    const date = new Date().toLocaleDateString('zh-CN', {year:'numeric', month:'long', day:'numeric'});

    document.getElementById('cert-nick').textContent = nick;
    document.getElementById('cert-date').textContent = `æ¿€æ´»æ—¥æœŸï¼š${date}`;

    const axes = {};
    document.querySelectorAll('#page3 .option.selected').forEach(opt => {
      if (opt.dataset.axis) axes[opt.dataset.axis] = opt.dataset.value;
    });

    const code = (axes.A || 'A') + (axes.C || 'C') + (axes.V || 'V') + (axes.E || 'E');
    document.getElementById('code-display').textContent = code;

    const rarityRoll = Math.random();
    let rarity = "æ™®é€š";
    if (rarityRoll < 0.05) rarity = "ä¼ è¯´çº§";
    else if (rarityRoll < 0.2) rarity = "å²è¯—çº§";
    else if (rarityRoll < 0.4) rarity = "ç¨€æœ‰çº§";
    document.getElementById('rarity-text').textContent = rarity + 'æ–°ç”Ÿä»£ç ';

    const tagsContainer = document.getElementById('tags-container');
    tagsContainer.innerHTML = '';
    [rarity, code + 'å‹äººæ ¼', 'æ—§æˆ‘å·²åˆ é™¤', '2026é‡å¯ä¸­'].forEach(t => {
      const span = document.createElement('span');
      span.className = 'tag';
      span.textContent = t;
      tagsContainer.appendChild(span);
    });

    const style = document.getElementById('shareStyle').value;
    let txt = '';
    if (style === '0') txt = `ä»Šå¤©åšäº†ã€Œæ—§æˆ‘åˆ é™¤åè®®ã€ï¼Œç¬¬ä¸€æ¬¡æ•¢ç›´é¢æœ€æƒ¨çš„æœªæ¥â€¦â€¦\næ–°ç”Ÿä»£ç ï¼š${code}ï¼ˆ${rarity}ï¼‰\næ„Ÿè§‰ç»ˆäºå¯ä»¥å’Œæ—§è‡ªå·±è¯´å†è§äº†ã€‚\nä½ ä¹Ÿæ¥è¯•è¯•ï¼Ÿ\n${location.href}`;
    else if (style === '1') txt = `æˆ‘æ‰¿è®¤ï¼Œæˆ‘ä¸€ç›´åœ¨ä¿æŠ¤é‚£ä¸ªloserã€‚\nå†™å®Œåå‘æ„¿æ™¯æƒ³åï¼Œä½†ä»£ç å‡ºæ¥åï¼Œæˆ‘çŸ¥é“æœ‰æ•‘äº†ã€‚\næ–°ç”Ÿä»£ç ï¼š${code}ï¼ˆ${rarity}ï¼‰\nä»ä»Šå¤©èµ·ï¼Œä¸å†åŸè°…è‡ªå·±ã€‚\nä½ æ•¢å—ï¼Ÿ`;
    else txt = `æ–°ç”Ÿä»£ç åŠ è½½å®Œæˆï¼š${code}ï¼ˆ${rarity}ï¼‰âœ¨\næ—§æˆ‘å·²æ­»ï¼Œ2026å¼€å§‹ä¸Šåˆ†ã€‚\nè°æ¥æŒ‘æˆ˜æˆ‘çš„ä¼ è¯´çº§ç¨€æœ‰åº¦ï¼ŸğŸ”¥\næµ‹ä¸€æµ‹ï¼š${location.href}`;
    document.getElementById('shareText').value = txt;
  }

  function saveCertificate() {
    launchConfetti();
    html2canvas(document.getElementById('certificate'), {scale: 2.8}).then(canvas => {
      const a = document.createElement('a');
      a.download = 'æ–°ç”Ÿä»£ç .png';
      a.href = canvas.toDataURL('image/png');
      a.click();
      alert('è¯ä¹¦å·²ç”Ÿæˆï¼é•¿æŒ‰ä¿å­˜ â†’ å‘æœ‹å‹åœˆ/å°çº¢ä¹¦ç‚«è€€ä½ çš„æ–°ç”Ÿä»£ç ');
    });
  }

  function restart() {
    document.querySelectorAll('input, textarea').forEach(el => el.value = '');
    document.querySelectorAll('.option').forEach(el => el.classList.remove('selected'));
    nextPage(1);
  }

  document.querySelectorAll('.option').forEach(opt => {
    opt.addEventListener('click', () => {
      const axis = opt.dataset.axis;
      if (axis) {
        document.querySelectorAll(`[data-axis="${axis}"]`).forEach(o => o.classList.remove('selected'));
      }
      opt.classList.toggle('selected');
    });
  });

  updateProgress();
</script>
</body>
</html>
