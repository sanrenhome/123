<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>人生修复指南 | Life Repair Guide</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #fcfaf7; color: #1c1917; }
    .serif { font-family: 'Noto Serif SC', serif; }
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #fcfaf7; }
    ::-webkit-scrollbar-thumb { background: #e7e5e4; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: #d6d3d1; }
    @media print { .no-print { display: none !important; } }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { AlertTriangle, ArrowDown, CheckCircle2, Copy, Printer, ShieldAlert, Zap, Target, Sparkles, Loader2, Compass } = lucideReact;

    const QUOTES = [
      { cn: "你想拥有的生活，建立在你不敢放手的废墟之上。", en: "The life you want is built on the ruins of the life you are afraid to let go of." },
      { cn: "如果你不知道自己想要什么，看看你讨厌什么。反向愿景通常比正向目标更具动力。", en: "If you don't know what you want, look at what you hate. Anti-vision is often more motivating than positive goals." },
      { cn: "身份驱动行为。除非你改变‘我是谁’，否则你的‘做什么’永远只是痛苦的博弈。", en: "Identity drives behavior. Until you change who you are, what you do will always be a struggle." },
      { cn: "平庸是一种缓慢的死亡。意识到这一点并不残忍，无视它才残忍。", en: "Mediocrity is a slow death. Realizing this isn't cruel; ignoring it is." }
    ];

    const INITIAL_STATE = {
      date: new Date().toISOString().split('T')[0],
      commitment: false,
      antiVision: { health: '', relationships: '', finance: '', work: '', selfTalk: '', summary: '', rootCause: '' },
      newIdentity: { naturalActions: '', iAmStatements: '', drivers: '', trueTodoList: '' },
      planning: { skills: Array(4).fill({ name: '', level: 0, unlockCondition: '' }), mechanismsDetail: '', milestones: '' },
      completedPhases: [],
      aiOptimalPath: ''
    };

    const App = () => {
      const [state, setState] = useState(() => {
        const saved = localStorage.getItem('life-reset-data');
        return saved ? JSON.parse(saved) : INITIAL_STATE;
      });
      const [isExpanding, setIsExpanding] = useState(null);

      useEffect(() => localStorage.setItem('life-reset-data', JSON.stringify(state)), [state]);

      const updateState = (path, value) => {
        const keys = path.split('.');
        setState(prev => {
          const newState = JSON.parse(JSON.stringify(prev));
          let current = newState;
          for (let i = 0; i < keys.length - 1; i++) current = current[keys[i]];
          current[keys[keys.length - 1]] = value;
          return newState;
        });
      };

      const togglePhaseCompletion = (phaseId) => {
        setState(prev => ({
          ...prev,
          completedPhases: prev.completedPhases.includes(phaseId)
            ? prev.completedPhases.filter(id => id !== phaseId)
            : [...prev.completedPhases, phaseId]
        }));
      };

      const scrollToNext = (id) => document.getElementById(id)?.scrollIntoView({ behavior: 'smooth', block: 'start' });

      const handleAIExpand = (fieldPath, fieldTitle, fieldDescription, currentValue) => {
        if (!currentValue.trim()) {
          alert("请先输入一些您的初步想法，AI 才能为您扩写。");
          return;
        }
        const prompt = `你是一位深度心理咨询专家和 Dan Koe 哲学的践行者。
当前模块：${fieldTitle}
模块说明：${fieldDescription}
用户输入的初步想法：${currentValue}

请基于 Dan Koe 的理念（反向愿景、身份驱动、系统化执行），对用户的输入进行扩写和深化。
要求：语言深刻、严肃、有冲击力，直接输出扩写后的文本。`;

        navigator.clipboard.writeText(prompt);
        alert("提示词已复制到剪贴板！去Claude/GPT/豆包生成后粘贴回来");
        setIsExpanding(fieldPath);
        setTimeout(() => setIsExpanding(null), 3000);
      };

      const exportAsText = () => {
        const content = `人生修复指南摘要 - ${state.date}\n\n反向愿景总结：${state.antiVision.summary}\n新身份宣言：${state.newIdentity.iAmStatements}\n真正想做：${state.newIdentity.trueTodoList}\n技能树：${state.planning.skills.map(s => s.name).filter(Boolean).join(', ')}\n里程碑：${state.planning.milestones}`;
        navigator.clipboard.writeText(content);
        alert('已复制全部内容');
      };

      const exportImage = () => {
        html2canvas(document.body, { scale: 2 }).then(canvas => {
          const a = document.createElement('a');
          a.href = canvas.toDataURL('image/png');
          a.download = '人生修复指南.png';
          a.click();
        });
      };

      const ReflectionBox = ({ title, description, value, onChange, onExpand, isExpanding, icon, minimal = false }) => (
        <div className={`space-y-4 ${minimal ? '' : 'group'} relative`}>
          <div className="flex justify-between items-start">
            <div className="space-y-1">
              {!minimal && <div className="flex items-center gap-2">{icon}<h3 className="serif font-bold text-lg text-stone-800">{title}</h3></div>}
              {minimal && <h4 className="text-xs font-bold text-stone-400 uppercase tracking-widest">{title}</h4>}
            </div>
            {onExpand && (
              <button onClick={onExpand} disabled={isExpanding} className="flex items-center gap-1.5 px-3 py-1.5 bg-stone-100 text-stone-500 rounded-lg text-[10px] font-bold uppercase tracking-wider hover:bg-amber-50 hover:text-amber-700 transition-all disabled:opacity-50">
                {isExpanding ? <Loader2 className="animate-spin" size={12} /> : <Sparkles size={12} />}
                {isExpanding ? "扩写中..." : "AI扩写"}
              </button>
            )}
          </div>
          <p className="text-stone-400 text-xs leading-relaxed">{description}</p>
          <textarea value={value} onChange={e => onChange(e.target.value)} placeholder="开始你的深度自省..." className="w-full bg-white border border-stone-200 rounded-2xl p-6 text-stone-800 focus:outline-none focus:ring-4 focus:ring-stone-50 min-h-[160px] transition-all placeholder:text-stone-200 leading-relaxed shadow-sm resize-none" />
        </div>
      );

      const NavItem = ({ label, onClick, completed }) => (
        <button onClick={onClick} className={`flex items-center gap-2 text-[10px] font-bold uppercase tracking-[0.15em] transition-all ${completed ? 'text-emerald-600' : 'text-stone-400 hover:text-stone-900'}`}>
          {completed && <CheckCircle2 size={10} />}
          {label}
        </button>
      );

      return (
        <div className="min-h-screen text-stone-900 bg-[#fcfaf7] px-4 py-12 md:px-0 transition-colors duration-500">
          <div className="max-w-3xl mx-auto space-y-32 mb-32">
            {/* Intro */}
            <section id="intro" className="min-h-[80vh] flex flex-col justify-center items-center text-center space-y-8">
              <div className="space-y-4">
                <h1 className="text-4xl md:text-6xl font-bold tracking-tighter serif text-stone-900">人生修复指南</h1>
                <p className="text-stone-400 text-lg md:text-xl font-medium tracking-widest uppercase">Life Repair Guide</p>
              </div>
              <div className="bg-white border border-stone-200 p-8 rounded-3xl max-w-2xl text-left space-y-6 shadow-sm">
                <div className="flex items-start gap-4 text-amber-600">
                  <AlertTriangle size={24} />
                  <p className="text-sm font-medium leading-relaxed">警告：这不是一次轻松的心理测试。你即将面对的是对旧自我的解构。这需要你预留一整天（8-10小时）的绝对专注。</p>
                </div>
                <div className="space-y-4 pt-4">
                  {QUOTES.map((q, idx) => (
                    <div key={idx} className="space-y-1">
                      <p className="text-stone-700 serif text-lg leading-relaxed">“{q.cn}”</p>
                      <p className="text-stone-400 italic text-xs">{q.en}</p>
                    </div>
                  ))}
                </div>
              </div>
              <div className="flex flex-col items-center gap-6 pt-8 w-full max-w-sm">
                <input type="date" value={state.date} onChange={e => updateState('date', e.target.value)} className="bg-white border border-stone-200 rounded-xl p-3 text-stone-900 w-full" />
                <label className="flex items-center gap-3 cursor-pointer group">
                  <input type="checkbox" checked={state.commitment} onChange={e => updateState('commitment', e.target.checked)} className="w-5 h-5 rounded border-stone-300 bg-white" />
                  <span className="text-stone-500">我承诺今天花一整天深度自省</span>
                </label>
                <button disabled={!state.commitment} onClick={() => scrollToNext('phase-1')} className={`w-full py-4 rounded-full font-bold text-lg transition-all ${state.commitment ? 'bg-stone-900 text-stone-50 hover:bg-stone-800' : 'bg-stone-200 text-stone-400'}`}>
                  开始修复 <ArrowDown className="inline ml-2" size={18} />
                </button>
              </div>
            </section>

            {/* Phase 1 */}
            <section id="phase-1" className={`space-y-12 transition-all duration-700 ${state.completedPhases.includes('p1') ? 'opacity-40 grayscale-[0.5]' : 'opacity-100'}`}>
              <header className="space-y-4">
                <div className="flex items-center gap-3 text-stone-400 uppercase tracking-widest text-xs font-bold">
                  <span className="bg-stone-100 px-2 py-1 rounded">阶段 01</span>
                  <span>上午重点：挖掘痛苦根源</span>
                </div>
                <h2 className="text-3xl md:text-5xl font-bold tracking-tight serif text-stone-900">反向愿景 + 拖延根源挖掘</h2>
              </header>
              <div className="space-y-10">
                <ReflectionBox title="健康与身体：5-10 年后最惨的样子" description="描述你的症状、镜子里的体型、逐渐衰退的精力。写出具体的画面感。" value={state.antiVision.health} onChange={val => updateState('antiVision.health', val)} onExpand={() => handleAIExpand('antiVision.health', "健康与身体反向愿景", "描述身体衰退后的痛苦", state.antiVision.health)} isExpanding={isExpanding === 'antiVision.health'} icon={<ShieldAlert className="text-orange-600/60" />} />
                <ReflectionBox title="关系与亲密：你会如何被对待？" description="最亲近的人会如何看待你的消沉？你会把情绪发泄给谁？" value={state.antiVision.relationships} onChange={val => updateState('antiVision.relationships', val)} onExpand={() => handleAIExpand('antiVision.relationships', "关系反向愿景", "关系崩塌后的孤独与自责", state.antiVision.relationships)} isExpanding={isExpanding === 'antiVision.relationships'} icon={<ShieldAlert className="text-orange-600/60" />} />
                <ReflectionBox title="金钱与物质：财务焦虑的深度" description="5年后你的收入与积蓄。想象你不得不放弃尊严的时刻。" value={state.antiVision.finance} onChange={val => updateState('antiVision.finance', val)} onExpand={() => handleAIExpand('antiVision.finance', "财务反向愿景", "匮乏感带来的压迫感", state.antiVision.finance)} isExpanding={isExpanding === 'antiVision.finance'} icon={<ShieldAlert className="text-orange-600/60" />} />
                <ReflectionBox title="工作与成就：无意义感的吞噬" description="如果继续做讨厌的工作，想象成就感为零的感觉。" value={state.antiVision.work} onChange={val => updateState('antiVision.work', val)} onExpand={() => handleAIExpand('antiVision.work', "工作反向愿景", "每日重复劳动的空虚", state.antiVision.work)} isExpanding={isExpanding === 'antiVision.work'} icon={<ShieldAlert className="text-orange-600/60" />} />
                <ReflectionBox title="自我对话：你最常对自己撒的谎" description="写下那些安慰自己的借口。写下你最讨厌的那个颓废灵魂的低语。" value={state.antiVision.selfTalk} onChange={val => updateState('antiVision.selfTalk', val)} onExpand={() => handleAIExpand('antiVision.selfTalk', "自我对话挖掘", "拆穿内心的防御机制", state.antiVision.selfTalk)} isExpanding={isExpanding === 'antiVision.selfTalk'} icon={<ShieldAlert className="text-orange-600/60" />} />
                <div className="p-8 bg-orange-50/50 border border-orange-100 rounded-3xl space-y-8">
                  <ReflectionBox title="我在保护哪个‘旧身份’？" description="拖延是为了回避什么情绪？" value={state.antiVision.rootCause} onChange={val => updateState('antiVision.rootCause', val)} onExpand={() => handleAIExpand('antiVision.rootCause', "旧身份挖掘", "找出舒适区的核心防御", state.antiVision.rootCause)} isExpanding={isExpanding === 'antiVision.rootCause'} minimal />
                  <ReflectionBox title="浓缩总结：一句话最扎心的未来" description="用最直白的一句话总结如果不改变的下场。" value={state.antiVision.summary} onChange={val => updateState('antiVision.summary', val)} onExpand={() => handleAIExpand('antiVision.summary', "反向愿景总结", "浓缩的痛苦画像", state.antiVision.summary)} isExpanding={isExpanding === 'antiVision.summary'} minimal />
                </div>
              </div>
              <div className="flex justify-end pt-8 border-t border-stone-200">
                <button onClick={() => { togglePhaseCompletion('p1'); scrollToNext('phase-2'); }} className={`px-8 py-3 rounded-full font-bold flex items-center gap-2 transition-all ${state.completedPhases.includes('p1') ? 'bg-stone-200 text-stone-500' : 'bg-stone-900 text-stone-50'}`}>
                  {state.completedPhases.includes('p1') ? '已确认' : '标记完成阶段 01'} <CheckCircle2 size={18} />
                </button>
              </div>
            </section>

            {/* Phase 2 */}
            <section id="phase-2" className={`space-y-12 transition-all duration-700 ${state.completedPhases.includes('p2') ? 'opacity-40 grayscale-[0.5]' : 'opacity-100'}`}>
              <header className="space-y-4">
                <div className="flex items-center gap-3 text-stone-400 uppercase tracking-widest text-xs font-bold">
                  <span className="bg-stone-100 px-2 py-1 rounded">阶段 02</span>
                  <span>下午重点：身份先行</span>
                </div>
                <h2 className="text-3xl md:text-5xl font-bold tracking-tight serif text-stone-900">新身份定义</h2>
              </header>
              <div className="space-y-10">
                <ReflectionBox title="理想自我的‘自然行为’清单" description="如果是理想版本的你，每天会‘自然而然’地做哪些事？" value={state.newIdentity.naturalActions} onChange={val => updateState('newIdentity.naturalActions', val)} onExpand={() => handleAIExpand('newIdentity.naturalActions', "行为模式清单", "新身份的自动化习惯", state.newIdentity.naturalActions)} isExpanding={isExpanding === 'newIdentity.naturalActions'} icon={<Zap className="text-amber-500/80" />} />
                <ReflectionBox title="我是谁：坚定具体的宣言" description="写下 3-5 句以‘我是……的人’开头的陈述。" value={state.newIdentity.iAmStatements} onChange={val => updateState('newIdentity.iAmStatements', val)} onExpand={() => handleAIExpand('newIdentity.iAmStatements', "新身份宣言", "明确、有力的身份锚点", state.newIdentity.iAmStatements)} isExpanding={isExpanding === 'newIdentity.iAmStatements'} icon={<Zap className="text-amber-500/80" />} />
                <ReflectionBox title="核心驱动力：前三名排序" description="自由、成长、金钱、影响、认可、宁静。找出核心动力。" value={state.newIdentity.drivers} onChange={val => updateState('newIdentity.drivers', val)} onExpand={() => handleAIExpand('newIdentity.drivers', "驱动力排序", "深层价值观分析", state.newIdentity.drivers)} isExpanding={isExpanding === 'newIdentity.drivers'} icon={<Zap className="text-amber-500/80" />} />
                <ReflectionBox title="真正想做的事" description="如果你的新身份已经成真，你最想投入精力创造什么？" value={state.newIdentity.trueTodoList} onChange={val => updateState('newIdentity.trueTodoList', val)} onExpand={() => handleAIExpand('newIdentity.trueTodoList', "愿景创造清单", "基于热忱而非恐惧的行动", state.newIdentity.trueTodoList)} isExpanding={isExpanding === 'newIdentity.trueTodoList'} icon={<Zap className="text-amber-500/80" />} />
              </div>
              <div className="flex justify-end pt-8 border-t border-stone-200">
                <button onClick={() => { togglePhaseCompletion('p2'); scrollToNext('phase-3'); }} className={`px-8 py-3 rounded-full font-bold flex items-center gap-2 transition-all ${state.completedPhases.includes('p2') ? 'bg-stone-200 text-stone-500' : 'bg-stone-900 text-stone-50'}`}>
                  {state.completedPhases.includes('p2') ? '已确认' : '标记完成阶段 02'} <CheckCircle2 size={18} />
                </button>
              </div>
            </section>

            {/* Phase 3 */}
            <section id="phase-3" className={`space-y-12 transition-all duration-700 ${state.completedPhases.includes('p3') ? 'opacity-40 grayscale-[0.5]' : 'opacity-100'}`}>
              <header className="space-y-4">
                <div className="flex items-center gap-3 text-stone-400 uppercase tracking-widest text-xs font-bold">
                  <span className="bg-stone-100 px-2 py-1 rounded">阶段 03</span>
                  <span>执行重点：保障系统</span>
                </div>
                <h2 className="text-3xl md:text-5xl font-bold tracking-tight serif text-stone-900">游戏化计划 + 强制执行</h2>
              </header>
              <div className="space-y-10">
                <div className="space-y-6">
                  <div className="flex items-center gap-2 text-xl font-bold serif text-stone-800">
                    <Target className="text-stone-400" />
                    <h3>核心技能树 / 主线任务</h3>
                  </div>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {state.planning.skills.map((skill, idx) => (
                      <div key={idx} className="bg-white border border-stone-200 p-5 rounded-2xl space-y-4 shadow-sm">
                        <input placeholder="技能名称" value={skill.name} onChange={e => {
                          const newSkills = [...state.planning.skills];
                          newSkills[idx].name = e.target.value;
                          updateState('planning.skills', newSkills);
                        }} className="bg-transparent text-lg font-bold w-full outline-none border-b border-stone-100 pb-1" />
                        <input type="range" min="0" max="10" value={skill.level} onChange={e => {
                          const newSkills = [...state.planning.skills];
                          newSkills[idx].level = parseInt(e.target.value);
                          updateState('planning.skills', newSkills);
                        }} className="w-full h-1 accent-stone-700" />
                        <textarea placeholder="解锁条件..." value={skill.unlockCondition} onChange={e => {
                          const newSkills = [...state.planning.skills];
                          newSkills[idx].unlockCondition = e.target.value;
                          updateState('planning.skills', newSkills);
                        }} className="bg-stone- brux50/50 border border-stone-100 rounded-xl p-3 text-sm w-full h-20 outline-none" />
                      </div>
                    ))}
                  </div>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div className="space-y-4 bg-white p-6 rounded-3xl border border-stone-200 shadow-sm">
                    <p className="text-xs text-stone-400 font-bold uppercase tracking-wider">选择心理杠杆：</p>
                    {["公开承诺", "惩罚机制", "进度可视化", "物理隔离"].map(m => (
                      <label key={m} className="flex items-center gap-3 cursor-pointer group">
                        <input type="checkbox" checked={state.planning.mechanisms.includes(m)} onChange={e => {
                          const newM = e.target.checked ? [...state.planning.mechanisms, m] : state.planning.mechanisms.filter(item => item !== m);
                          updateState('planning.mechanisms', newM);
                        }} className="w-4 h-4 rounded border-stone-300" />
                        <span className="text-stone-600 text-sm">{m}</span>
                      </label>
                    ))}
                  </div>
                  <ReflectionBox title="机制具体执行计划" description="写下具体的惩罚或公开承诺细节。" value={state.planning.mechanismsDetail} onChange={val => updateState('planning.mechanismsDetail', val)} minimal onExpand={() => handleAIExpand('planning.mechanismsDetail ' , "强制执行细节", "高压力的外部约束设计", state.planning.mechanismsDetail)} isExpanding={isExpanding === 'planning.mechanismsDetail'} />
                </div>
                <ReflectionBox title="短期里程碑：1周 / 1月 / 3月" description="接下来 90 天内最关键的几个可量化节点。" value={state.planning.milestones} onChange={val => updateState('planning.milestones', val)} onExpand={() => handleAIExpand('planning.milestones', "里程碑规划", "关键时间节点的目标拆解", state.planning.milestones)} isExpanding={isExpanding === 'planning.milestones'} icon={<Target className="text-stone-400" />} />
              </div>
              <div className="flex justify-end pt-8 border-t border-stone-200">
                <button onClick={() => { togglePhaseCompletion('p3'); scrollToNext('summary'); }} className={`px-8 py-3 rounded-full font-bold flex items-center gap-2 transition-all ${state.completedPhases.includes('p3') ? 'bg-stone-200 text-stone-500' : 'bg-stone-900 text-stone-50'}`}>
                  {state.completedPhases.includes('p3') ? '已确认' : '标记完成阶段 03'} <CheckCircle2 size={18} />
                </button>
              </div>
            </section>

            {/* Summary */}
            <section id="summary" className="space-y-12 pt-16 border-t border-stone-200">
              <header className="text-center space-y-4">
                <h2 className="text-3xl md:text-5xl font-bold tracking-tight serif text-stone-900">人生修复协议</h2>
                <p className="text-stone-500 text-lg">这是你与自己的终极契约。</p>
              </header>
              <div className="bg-white border border-stone-200 rounded-[2.5rem] p-10 md:p-16 space-y-12 shadow-xl shadow-stone-200/50 relative overflow-hidden">
                <div className="flex flex-col md:flex-row justify-between items-start border-b border-stone-100 pb-8 gap-4">
                  <div>
                    <h3 className="text-2xl font-bold serif text-stone-900">人生修复协议</h3>
                    <p className="text-stone-400 text-sm mt-1">签署日期：{state.date}</p>
                  </div>
                </div>
                <div className="grid md:grid-cols-2 gap-12">
                  <div className="space-y-10">
                    <div>
                      <h4 className="text-stone-400 text-[10px] font-bold uppercase tracking-widest mb-3">我拒绝的未来</h4>
                      <p className="text-stone-600 text-sm italic border-l-2 border-stone-100 pl-4">“{state.antiVision.summary || '未填写'}”</p>
                    </div>
                    <div>
                      <h4 className="text-stone-400 text-[10px] font-bold uppercase tracking-widest mb-3">新身份宣言</h4>
                      <div className="whitespace-pre-wrap text-stone-900 text-lg font-bold serif leading-snug">{state.newIdentity.iAmStatements || '未填写'}</div>
                    </div>
                  </div>
                  <div className="space-y-10">
                    <div>
                      <h4 className="text-stone-400 text-[10px] font-bold uppercase tracking-widest mb-3">核心自然行为</h4>
                      <p className="text-stone-500 text-sm whitespace-pre-wrap">{state.newIdentity.naturalActions || '未填写'}</p>
                    </div>
                    <div>
                      <h4 className="text-stone-400 text-[10px] font-bold uppercase tracking-widest mb-3">驱动力排序</h4>
                      <p className="text-stone-500 text-sm">{state.newIdentity.drivers || '未填写'}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div className="flex flex-col md:flex-row gap-4 justify-center no-print pb-32">
                <button onClick={exportAsText} className="px-10 py-4 bg-stone-900 text-stone-50 rounded-full font-bold flex items-center justify-center gap-2 hover:bg-stone-800 shadow-lg"><Copy size={20} /> 复制全部内容</button>
                <button onClick={exportImage} className="px-10 py-4 bg-white text-stone-900 rounded-full font-bold flex items-center justify-center gap-2 border border-stone-200 shadow-sm"><Printer size={20} /> 打印 / 保存 PDF</button>
              </div>
            </section>
          </div>

          {/* Navigation */}
          <nav className="fixed bottom-6 left-1/2 -translate-x-1/2 bg-white/70 backdrop-blur-xl border border-stone-200/50 px-8 py-3 rounded-full flex items-center gap-6 shadow-xl z-50 no-print">
            <NavItem label="痛点" onClick={() => scrollToNext('phase-1')} completed={state.completedPhases.includes('p1')} />
            <div className="w-[1px] h-3 bg-stone-200" />
            <NavItem label="身份" onClick={() => scrollToNext('phase-2')} completed={state.completedPhases.includes('p2')} />
            <div className="w-[1px] h-3 bg-stone-200" />
            <NavItem label="系统" onClick={() => scrollToNext('phase-3')} completed={state.completedPhases.includes('p3')} />
            <div className="w-[1px] h-3 bg-stone-200" />
            <NavItem label="协议" onClick={() => scrollToNext('summary')} completed={true} />
          </nav>
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
